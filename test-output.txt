PASS __tests__/services/locationService.test.ts (8.902 s)
PASS __tests__/services/flatSettlementService.test.ts
PASS __tests__/services/roomAssignmentService.test.ts (10.208 s)
PASS __tests__/services/interestService.test.ts (9.686 s)
PASS __tests__/services/roomPhotoService.test.ts (10.252 s)
PASS __tests__/services/notificationService.test.ts (10.53 s)
PASS __tests__/services/pushTokenService.test.ts (10.519 s)
PASS __tests__/services/authService.test.ts (10.624 s)
  â— Console

    console.log
      [Supabase][init] URL: https://afiuxsznugzmytibxbre.supabase.co

      at Object.log (src/services/authService.ts:31:9)

    console.log
      [Supabase][init] ANON key length: 208

      at Object.log (src/services/authService.ts:32:9)

    console.log
      [Supabase][init] Internal rest URL: undefined

      at Object.log (src/services/authService.ts:43:11)

    console.log
      [Supabase][init] Internal storage URL: undefined

      at Object.log (src/services/authService.ts:44:11)

    console.log
      [AuthService.login] called with email: a@b.com

      at AuthService.log (src/services/authService.ts:149:13)

    console.log
      [AuthService.login] response: { status: 200, ok: true, url: undefined }

      at AuthService.log (src/services/authService.ts:157:13)

    console.log
      [AuthService.login] called with email: a@b.com

      at AuthService.log (src/services/authService.ts:149:13)

    console.log
      [AuthService.login] response: { status: 401, ok: false, url: undefined }

      at AuthService.log (src/services/authService.ts:157:13)

    console.error
      âŒ Error login API: bad

    [0m [90m 163 |[39m     [36mif[39m ([33m![39mresponse[33m.[39mok) {
     [90m 164 |[39m       [36mconst[39m errorText [33m=[39m [36mawait[39m response[33m.[39mtext()[33m;[39m
    [31m[1m>[22m[39m[90m 165 |[39m       console[33m.[39merror([32m'âŒ Error login API:'[39m[33m,[39m errorText)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 166 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Credenciales invÃ¡lidas'[39m)[33m;[39m
     [90m 167 |[39m     }
     [90m 168 |[39m[0m

      at AuthService.error (src/services/authService.ts:165:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

    console.log
      [AuthService.loginWithGoogle] Iniciando login con Google

      at AuthService.log (src/services/authService.ts:178:13)

    console.log
      [AuthService.loginWithGoogle] Google idToken exists: true

      at AuthService.log (src/services/authService.ts:183:13)

    console.log
      [AuthService.loginWithGoogle] Supabase response: { hasUser: true, hasSession: true, error: undefined }

      at AuthService.log (src/services/authService.ts:194:13)

    console.log
      [AuthService.refreshToken] Attempting refreshSession

      at AuthService.log (src/services/authService.ts:374:13)

    console.log
      [AuthService.refreshToken] Supabase response: { hasSession: true, error: undefined }

      at AuthService.log (src/services/authService.ts:384:15)

    console.log
      [AuthService.refreshToken] New token stored

      at AuthService.log (src/services/authService.ts:398:15)

PASS __tests__/services/matchService.test.ts
PASS __tests__/services/shareService.test.ts
PASS __tests__/services/profilePhotoService.test.ts (9.49 s)
PASS __tests__/services/swipeRejectionService.test.ts (10.762 s)
PASS __tests__/services/roomInvitationService.test.ts (9.609 s)
PASS __tests__/services/roomExtrasService.test.ts (9.557 s)
PASS __tests__/services/profileService.test.ts (10.497 s)
  â— Console

    console.log
      [ProfileService.getProfile] Fetching profile...

      at ProfileService.log (src/services/profileService.ts:38:13)

    console.log
      [ProfileService.getAuthHeaders] Token exists: true

      at ProfileService.log (src/services/profileService.ts:25:13)

    console.log
      [ProfileService.getAuthHeaders] Token first 20 chars: token

      at ProfileService.log (src/services/profileService.ts:26:13)

    console.log
      [ProfileService.getProfile] Initial response: { status: 404, ok: false }

      at ProfileService.log (src/services/profileService.ts:46:13)

    console.log
      [ProfileService.getProfile] Perfil no encontrado (404)

      at ProfileService.log (src/services/profileService.ts:75:17)

    console.log
      [ProfileService.getProfile] Fetching profile...

      at ProfileService.log (src/services/profileService.ts:38:13)

    console.log
      [ProfileService.getAuthHeaders] Token exists: true

      at ProfileService.log (src/services/profileService.ts:25:13)

    console.log
      [ProfileService.getAuthHeaders] Token first 20 chars: token

      at ProfileService.log (src/services/profileService.ts:26:13)

    console.log
      [ProfileService.getProfile] Initial response: { status: 401, ok: false }

      at ProfileService.log (src/services/profileService.ts:46:13)

    console.log
      [ProfileService.getProfile] 401 received. Attempting token refresh...

      at ProfileService.log (src/services/profileService.ts:53:15)

    console.log
      [ProfileService.getProfile] Refresh result: success

      at ProfileService.log (src/services/profileService.ts:55:15)

    console.log
      [ProfileService.getAuthHeaders] Token exists: true

      at ProfileService.log (src/services/profileService.ts:25:13)

    console.log
      [ProfileService.getAuthHeaders] Token first 20 chars: token

      at ProfileService.log (src/services/profileService.ts:26:13)

    console.log
      [ProfileService.getProfile] Retried response: { status: 200, ok: true }

      at ProfileService.log (src/services/profileService.ts:66:17)

    console.log
      [ProfileService.getProfile] Perfil cargado correctamente

      at ProfileService.log (src/services/profileService.ts:86:13)

    console.log
      [ProfileService.createProfile] Creating profile...

      at ProfileService.log (src/services/profileService.ts:171:13)

    console.log
      [ProfileService.getAuthHeaders] Token exists: true

      at ProfileService.log (src/services/profileService.ts:25:13)

    console.log
      [ProfileService.getAuthHeaders] Token first 20 chars: token

      at ProfileService.log (src/services/profileService.ts:26:13)

    console.log
      [ProfileService.createProfile] Response: { status: 400, ok: false }

      at ProfileService.log (src/services/profileService.ts:180:13)

    console.error
      [ProfileService.createProfile] Error: invalid

    [0m [90m 185 |[39m     [36mif[39m ([33m![39mresponse[33m.[39mok) {
     [90m 186 |[39m       [36mconst[39m error [33m=[39m [36mawait[39m response[33m.[39mjson()[33m;[39m
    [31m[1m>[22m[39m[90m 187 |[39m       console[33m.[39merror(
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 188 |[39m         [32m'[ProfileService.createProfile] Error:'[39m[33m,[39m
     [90m 189 |[39m         error[33m?[39m[33m.[39merror [33m||[39m error
     [90m 190 |[39m       )[33m;[39m[0m

      at ProfileService.error (src/services/profileService.ts:187:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS __tests__/services/chatService.test.ts (10.101 s)
PASS __tests__/services/roomService.test.ts (9.5 s)
PASS __tests__/services/flatExpenseService.test.ts (10.385 s)

Test Suites: 18 passed, 18 total
Tests:       48 passed, 48 total
Snapshots:   0 total
Time:        14.189 s
Ran all test suites.
